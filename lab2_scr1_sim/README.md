# Лабораторная работа 2. Обработка исключений в SCR1

Выполнила студентка группы P41192c Криворотова Полина

## Постановка задачи
Обработать исключение Breakpoint выводом строки «BP». Настроить ресет вектор и вектор обработки прерываний на 0x1000 и 0x0840 соответственно. Проверить работу программы на примере sa/rv32mi/sbreak.S

## Последовательнось действий для выполнения ЛР
```
cd <WORK_LIB>
git clone https://github.com/pakrivorotova/scr1 # клонирование 
cd ./scr1 # переходим в папку с проектом
git submodule update --init --recursive # обновляем сабрепо с тестами
git checkout -b lab_scr1_sim # создаем ветку для выполнения лабораторной и переходим в нее

code . # Выполняем лабораторную работу в visual studio code

git add . # индексируем все измения
git commit -am "add lab" # создаем коммит
git push origin lab_scr1_sim # пушим коммит на сервер
```

## В Visual Studio Code делаем следующее:

1. Создаем дирректорию lab_scr1_sim и файл README.md в ней. В файле описываем поставленную задачу.
2. Модифицируем список тестов в файле .../scr1/sim/tests/riscv_isa/rv32_tests.inc:
Оставляем в списке тестов только sa/rv32mi/sbreak.S

3. В терминале прописываем путь до тулчейна (см. лаб 1) PATH=.../riscv-tools/riscv-gcc-10.2.0-gbbc9263-210318T1412/bin:$PATH
4. Пробуем запустить симуляцию: make TARGETS="riscv_isa"
5. Модифицируем вектора прирываний и ресетов в процессоре. /scr1/src/includes/scr1_arch_description.svh 
SCR1_ARCH_RST_VECTOR =0x1000
SCR1_ARCH_MTVEC_BASE = 0x0840

4. Модифицируем скрипты линковщика для правильной сборки проекта.
Для этого заходим в файл sim/tests/common/link.ld и корректируем в нем смещение кода
в файле sim/tests/common/riscv_macros.h также корректируем смещение

5. После того, как правильно настроили вектора модифицируем обработчик прерывания

## Коментарий к работе
Изменения, весенные в файлы, можно проследить в истории изменений в веткеlab2_scr1_sim.
